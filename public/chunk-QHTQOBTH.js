import{a as z}from"./chunk-XUCFZFM7.js";import{a as R}from"./chunk-ZLELQB5G.js";import"./chunk-RQWUBYQQ.js";import{$ as D,B as a,C as P,D as I,J as S,L as E,M as V,N as F,O as T,T as j,b as v,c as y,d as w,f as k,h as M,j as p,k as m,n as O,o as h,p as s,q as b,r as _,s as l,u as r,v as o,w as x,x as C,y as u,z as d}from"./chunk-CLWXTAWR.js";var J=(()=>{class i{constructor(){this.rand=0,this.http=k(T)}getPeliculas(){return this.http.get("https://api-movies.fly.dev/api/v1/movies").pipe(y(e=>e.sort((n,t)=>n.title<t.title?-1:n.title>t.title?1:0)))}getPelicula(){return new v(e=>{this.getPeliculas().subscribe(n=>{let t;do this.rand=Math.floor(Math.random()*n.length),t=n[this.rand];while(!t);e.next(t),e.complete()})})}getOpcionesPeliculas(){return new v(e=>{this.getPeliculas().subscribe(n=>{let t=[],c=new Set;for(;t.length<4;){let f=Math.floor(Math.random()*n.length);c.has(f)||(c.add(f),t.push(n[f]))}e.next(t),e.complete()})})}getPreguntaConOpciones(){return new v(e=>{this.getOpcionesPeliculas().subscribe(n=>{let t=Math.floor(Math.random()*n.length),c=n[t];e.next({imagen:c.backdrops[3],opciones:n.map(f=>f.title),correcta:c.title}),e.complete()})})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function N(i,g){i&1&&x(0,"div",14)}function X(i,g){if(i&1){let e=C();r(0,"div")(1,"button",15),u("click",function(){let t=p(e).$implicit,c=d(2);return m(c.verificarRespuesta(t))}),a(2),o()()}if(i&2){let e=g.$implicit;s(2),P(e)}}function G(i,g){if(i&1&&(r(0,"div")(1,"div",10),a(2,"\xBFA que pelicula pertenece la siguiente foto?"),o(),_(3,N,1,0,"div",11),x(4,"img",12),_(5,X,3,1,"div",13),o()),i&2){let e=d();s(3),l("ngIf",e.cargando),s(),l("src",e.imagen,O),s(),l("ngForOf",e.opciones)}}function Q(i,g){if(i&1){let e=C();r(0,"div",16)(1,"div",7)(2,"h1"),a(3,"Ganaste! \u{1F917}"),o(),r(4,"div",17)(5,"button",18),u("click",function(){p(e);let t=d();return m(t.goTo("home"))}),a(6,"Ir a home"),o(),r(7,"span"),a(8,"|"),o(),r(9,"button",18),u("click",function(){p(e);let t=d();return m(t.goTo())}),a(10,"Volver a jugar"),o()()()()}}function W(i,g){if(i&1){let e=C();r(0,"div",19)(1,"div",7)(2,"h1"),a(3,"Perdiste \u{1F494}"),o(),r(4,"div",17)(5,"button",18),u("click",function(){p(e);let t=d();return m(t.goTo("home"))}),a(6,"Ir a home"),o(),r(7,"span"),a(8,"|"),o(),r(9,"button",18),u("click",function(){p(e);let t=d();return m(t.reiniciar())}),a(10,"Volver a jugar"),o()()()()}}var ne=(()=>{class i{constructor(e,n){this.peliculasService=e,this.router=n,this.opciones=[],this.imagen="",this.correcta="",this.intentosFallidos="\u{1F497} \u{1F497} \u{1F497} ",this.intentos=0,this.perdio=!1,this.gano=!1,this.contador=0,this.cargando=!1}reiniciar(){this.perdio=!1,this.gano=!1,this.intentos=0,this.intentosFallidos="\u{1F497} \u{1F497} \u{1F497} ",this.contador=0,this.nuevaPregunta()}ngOnInit(){this.nuevaPregunta()}nuevaPregunta(){this.cargando=!0,this.peliculasService.getPreguntaConOpciones().subscribe(e=>{this.pregunta=e,this.opciones=e.opciones,this.imagen=e.imagen,this.correcta=e.correcta,this.cargando=!1})}verificarRespuesta(e){e!=this.correcta?this.intentos++:this.contador++,this.actualizarVidas(),this.nuevaPregunta()}actualizarVidas(){this.intentosFallidos="",this.intentos==3?this.perdio=!0:this.contador==10&&(this.gano=!0);for(let e=0;e<3-this.intentos;e++)this.intentosFallidos+="\u{1F497} "}goTo(e=""){e==="home"&&this.router.navigate(["/home"])}static{this.\u0275fac=function(n){return new(n||i)(b(J),b(j))}}static{this.\u0275cmp=M({type:i,selectors:[["app-preguntados"]],standalone:!0,features:[S],decls:21,vars:5,consts:[["rel","stylesheet","href",h`https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css`,"integrity","sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm","crossorigin","anonymous"],["rel","preconnect","href",h`https://fonts.googleapis.com`],["rel","preconnect","href",h`https://fonts.gstatic.com`,"crossorigin",""],["href",h`https://fonts.googleapis.com/css2?family=Bitter:wght@100&family=Jersey+10+Charted&family=Jersey+15&family=Jersey+20+Charted&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap`,"rel","stylesheet"],["id","background"],[4,"ngIf"],["id","intentos",1,"row"],[1,"col","text-center"],["class","row","id","gano",4,"ngIf"],["class","row","id","perdio",4,"ngIf"],[1,"pregunta"],["class","spinner",4,"ngIf"],["alt","Imagen de la pel\xEDcula",1,"img-pelicula",3,"src"],[4,"ngFor","ngForOf"],[1,"spinner"],[1,"btn-opcion",3,"click"],["id","gano",1,"row"],[1,"container"],["type","submit",3,"click"],["id","perdio",1,"row"]],template:function(n,t){n&1&&(r(0,"head"),x(1,"link",0)(2,"link",1)(3,"link",2)(4,"link",3),o(),r(5,"body",4)(6,"h1"),a(7,"Preguntados"),o(),_(8,G,6,3,"div",5),r(9,"div",6)(10,"div",7),a(11," Intentos: "),r(12,"small"),a(13),o(),r(14,"span"),a(15," | "),o(),a(16),o()(),_(17,Q,11,0,"div",8)(18,W,11,0,"div",9),x(19,"app-logout")(20,"app-chat"),o()),n&2&&(s(8),l("ngIf",t.pregunta&&!t.gano&&!t.perdio),s(5),P(t.intentosFallidos),s(3),I(" Contador: ",t.contador," "),s(),l("ngIf",t.gano),s(),l("ngIf",t.perdio))},dependencies:[F,E,V,D,R,z],styles:['#background[_ngcontent-%COMP%]{width:100%;height:100vh;background-size:cover;background-image:url("./media/login-desktop2-RMQDQUJU.jpg");background-repeat:no-repeat}body[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{padding-top:15px;color:#fff;font-family:"Jersey 10 Charted",sans-serif;font-size:50px}.img-pelicula[_ngcontent-%COMP%]{width:30%;height:30%;border:6px solid #d067c9}.pregunta[_ngcontent-%COMP%]{color:#fff;font-size:30px}.btn-opcion[_ngcontent-%COMP%]{border-radius:5px;color:#fff;font-size:30px;background:#f766d0;padding:10px 20px;margin:5px;text-decoration:none;font-family:Courier New,Courier,monospace}.btn-opcion[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f20cc4}#gano[_ngcontent-%COMP%], #perdio[_ngcontent-%COMP%]{background-color:#ee1fbe80;color:#fff;width:300px;height:200px;text-align:center;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}#intentos[_ngcontent-%COMP%]{font-family:sans-serif;position:fixed;bottom:0;left:0;width:100%;text-align:center;display:flex;justify-content:center;align-items:center;color:#fff;font-size:30px;background-color:#ee1fbeb3}button[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{background:none;color:#fff;border:none;padding:5px;font-weight:700}button[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:5px solid rgba(255,253,253,.3);border-radius:50%;border-left-color:#ad4dca;animation:_ngcontent-%COMP%_spin 1s ease infinite;display:flex;justify-content:center;align-items:center;margin:10px auto auto}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}}return i})();export{ne as PreguntadosComponent};
