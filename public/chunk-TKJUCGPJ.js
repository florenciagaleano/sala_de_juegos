import{a as z}from"./chunk-AQYB5AY4.js";import{a as O}from"./chunk-WQSF7HY6.js";import{a as T}from"./chunk-6OOIMU7O.js";import"./chunk-GLYEPYP4.js";import{A as c,B as k,C as a,D as S,E as M,K as I,O as E,P as V,V as j,a as s,d as v,i as y,k as l,l as d,la as P,o as w,p,q as m,r as h,s as b,t as g,v as o,w as r,x as f,y as C,z as u}from"./chunk-BA2Q4JWY.js";var F=(()=>{class n{constructor(){this.deckId=null,this.cartasMostradas=new Set}inicializarMazo(){return s(this,null,function*(){let i=yield(yield fetch("https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1")).json();this.deckId=i.deck_id,this.cartasMostradas.clear()})}getCard(){return s(this,null,function*(){this.deckId||(yield this.inicializarMazo());let i=yield(yield fetch(`https://deckofcardsapi.com/api/deck/${this.deckId}/draw/?count=1`)).json();if(i.success){let e=i.cards[0];return this.cartasMostradas.add(e.code),e}else throw new Error("No hay cartas disponibles.")})}cardIsHigher(t,i){return new Promise(e=>{let x={ACE:1,KING:13,QUEEN:12,JACK:11,10:10,9:9,8:8,7:7,6:6,5:5,4:4,3:3,2:2},N=x[t.value]||parseInt(t.value,10),D=x[i.value]||parseInt(i.value,10);e(D>N)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function G(n,_){if(n&1){let t=C();o(0,"div")(1,"div",10),f(2,"img",11),o(3,"div")(4,"div"),a(5,"La carta que sigue es..."),r(),o(6,"button",12),u("click",function(){l(t);let e=c();return d(e.seleccionarMayor())}),a(7,"Mayor"),r(),o(8,"button",12),u("click",function(){l(t);let e=c();return d(e.seleccionarMenor())}),a(9,"Menor"),r()()(),o(10,"h2",13),a(11,"Intentos: "),o(12,"small"),a(13),r(),o(14,"span"),a(15," | "),r(),a(16),r()()}if(n&2){let t=c();m(2),k("src",t.currentCard.image,w),m(11),S(t.intentosFallidos),m(3),M(" Contador: ",t.contador,"")}}function R(n,_){if(n&1){let t=C();o(0,"div",14)(1,"div",15)(2,"h1"),a(3,"Ganaste! \u{1F917}"),r(),o(4,"div",16)(5,"button",17),u("click",function(){l(t);let e=c();return d(e.goTo("home"))}),a(6,"Ir a home"),r(),o(7,"span"),a(8,"|"),r(),o(9,"button",17),u("click",function(){l(t);let e=c();return d(e.goTo())}),a(10,"Volver a jugar"),r()()()()}}function A(n,_){if(n&1){let t=C();o(0,"div",18)(1,"div",15)(2,"h1"),a(3,"Perdiste \u{1F494}"),r(),o(4,"div",16)(5,"button",19),u("click",function(){l(t);let e=c();return d(e.goTo("home"))}),a(6,"Ir a home"),r(),o(7,"button",19),u("click",function(){l(t);let e=c();return d(e.reiniciar())}),a(8,"Volver a jugar"),r()()()()}}var $=(()=>{class n{constructor(t,i,e){this.cardService=t,this.router=i,this.puntajeService=e,this.intentos=0,this.intentosFallidos="\u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} ",this.mayorSeleccionado=!1,this.perdio=!1,this.gano=!1,this.contador=0,this.cartasMostradas=new Set}ngOnInit(){this.getNewCard()}reiniciar(){this.intentos=0,this.intentosFallidos="\u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} \u{1F497} ",this.mayorSeleccionado=!1,this.perdio=!1,this.gano=!1,this.getNewCard(),this.contador=0}getNewCard(){return s(this,null,function*(){this.currentCard=yield this.cardService.getCard(),this.nextCard=yield this.cardService.getCard()})}seleccionarMayor(){return s(this,null,function*(){this.mayorSeleccionado=!0,yield this.evaluateGuess()})}seleccionarMenor(){return s(this,null,function*(){this.mayorSeleccionado=!1,yield this.evaluateGuess()})}evaluateGuess(){return s(this,null,function*(){let t=yield this.cardService.cardIsHigher(this.currentCard,this.nextCard);t&&this.mayorSeleccionado||!t&&!this.mayorSeleccionado?this.contador++:this.intentos++,this.intentos==9?this.perdio=!0:this.contador==10&&(this.gano=!0,this.puntajeService.guardarPuntos("Cartas",(9-this.intentos).toString())),this.currentCard=this.nextCard,this.nextCard=yield this.cardService.getCard(),this.actualizarVidas()})}actualizarVidas(){this.intentosFallidos="";for(let t=0;t<9-this.intentos;t++)this.intentosFallidos+="\u{1F497} "}goTo(t=""){t==="home"&&this.router.navigate(["/home"])}static{this.\u0275fac=function(i){return new(i||n)(h(F),h(j),h(z))}}static{this.\u0275cmp=y({type:n,selectors:[["app-cartas"]],standalone:!0,features:[I],decls:14,vars:3,consts:[["charset","utf-8"],["rel","stylesheet","href",p`https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css`,"integrity","sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm","crossorigin","anonymous"],["rel","preconnect","href",p`https://fonts.googleapis.com`],["rel","preconnect","href",p`https://fonts.gstatic.com`,"crossorigin",""],["href",p`https://fonts.googleapis.com/css2?family=Bitter:wght@100&family=Jersey+10+Charted&family=Jersey+15&family=Jersey+20+Charted&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap`,"rel","stylesheet"],["id","background"],["id","titulo"],[4,"ngIf"],["class","row","id","gano",4,"ngIf"],["class","row","id","perdio",4,"ngIf"],["id","juego"],["alt","",3,"src"],[1,"btn",3,"click"],["id","intentos"],["id","gano",1,"row"],[1,"col","text-center"],[1,"container"],["type","submit",3,"click"],["id","perdio",1,"row"],["type","submit",1,"button-resultados",3,"click"]],template:function(i,e){i&1&&(f(0,"meta",0),o(1,"head"),f(2,"link",1)(3,"link",2)(4,"link",3)(5,"link",4),r(),o(6,"body",5)(7,"h1",6),a(8," Mayor o Menor "),r(),b(9,G,17,3,"div",7)(10,R,11,0,"div",8)(11,A,9,0,"div",9),f(12,"app-navbar")(13,"app-chat"),r()),i&2&&(m(9),g("ngIf",e.currentCard&&!e.gano&&!e.perdio),m(),g("ngIf",e.gano),m(),g("ngIf",e.perdio))},dependencies:[P,V,E,T,O],styles:['#background[_ngcontent-%COMP%]{width:100%;height:100vh;background-size:cover;background-image:url("./media/login-desktop2-RMQDQUJU.jpg");background-repeat:no-repeat}body[_ngcontent-%COMP%]{text-align:center;font-family:Courier New,Courier,monospace;font-size:25px;color:#34005f;font-weight:700}#titulo[_ngcontent-%COMP%]{padding-top:15px;color:#fff;font-family:"Jersey 10 Charted",sans-serif;font-size:50px}#juego[_ngcontent-%COMP%]{padding:2rem;background-color:#f24ed1bf;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);display:inline-block;justify-content:center;align-items:center;color:#fff}#perdio[_ngcontent-%COMP%], #gano[_ngcontent-%COMP%]{background-color:#ee1fbe80;color:#fff;width:300px;height:200px;text-align:center;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}#intentos[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif;position:fixed;bottom:0;left:0;width:100%;text-align:center;display:flex;justify-content:center;align-items:center;background-color:#ee1fbe80}.btn[_ngcontent-%COMP%]{border-radius:5px;color:#fff;font-size:30px;background:#f766d0;padding:10px 20px;margin:5px;text-decoration:none;font-family:Courier New,Courier,monospace}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f20cc4}.button-resultados[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{background:none;color:#fff;border:none;padding:5px;font-weight:700}.button-resultados[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}']})}}return n})();export{$ as CartasComponent};
