import{a as ee}from"./chunk-WQSF7HY6.js";import{a as Q}from"./chunk-6OOIMU7O.js";import{e as $,g as J,h as W,i as Z,j as H,l as K,m as X,n as Y}from"./chunk-GLYEPYP4.js";import{A as v,C as o,K as y,L as g,M as F,O as I,Oa as B,P as M,V as N,X as w,Y as u,Z as j,_ as O,ba as P,ca as k,da as T,ea as V,fa as D,ga as q,ha as A,i as S,ia as z,ja as G,k as b,ka as R,l as x,la as U,ma as L,q as d,r as f,s as m,t as r,v as n,w as t,x as s,y as C,z as E}from"./chunk-BA2Q4JWY.js";var p=class{static edadValidator(l){let e=l.value;return isNaN(e)||e<18||e>98?{edadInvalida:!0}:null}static soloLetras(l){let e=l.value;return e&&!/^[A-Za-z]+$/.test(e)?{soloLetras:!0}:null}static telefonoValidator(l){let e=l.value;return isNaN(e)||e.toString().length!=10?{telefonoInvalido:!0}:null}};var _=i=>({"is-invalid":i});function ne(i,l){i&1&&(n(0,"div"),o(1," Nombre invalido. "),t())}function ie(i,l){i&1&&(n(0,"div"),o(1," Apellido invalido. "),t())}function oe(i,l){i&1&&(n(0,"div"),o(1," Edad invalida. "),t())}function ae(i,l){i&1&&(n(0,"div"),o(1," Telefono invalido. "),t())}function re(i,l){i&1&&(n(0,"div"),o(1," Falta indicar juego favorito. "),t())}function le(i,l){i&1&&(n(0,"div"),o(1," Falta indicar como conociste la pagina. "),t())}function de(i,l){i&1&&(n(0,"div"),o(1," Decinos tu opinion. "),t())}function se(i,l){i&1&&(n(0,"button",30),o(1," Enviar \u{1F48C} "),t())}function ce(i,l){if(i&1){let e=C();n(0,"form",2),E("ngSubmit",function(){b(e);let c=v();return x(c.onSubmit())}),n(1,"div",3)(2,"h2",4),o(3,"Contanos que pensas de la pagina!"),t(),n(4,"label",5),o(5,"Nombre"),t(),s(6,"input",6),m(7,ne,2,0,"div",7),n(8,"label",8),o(9,"Apellido"),t(),s(10,"input",9),m(11,ie,2,0,"div",7),n(12,"div")(13,"label",10),o(14,"Edad"),t(),s(15,"input",11),m(16,oe,2,0,"div",7),t(),n(17,"div")(18,"label",12),o(19,"Telefono"),t(),s(20,"input",13),m(21,ae,2,0,"div",7),t(),n(22,"div")(23,"label",14),o(24,"Cual fue tu juego favorito?"),t(),n(25,"div",15),s(26,"input",16),n(27,"label",17),o(28,"Ahorcado"),t(),s(29,"br"),t(),n(30,"div",15),s(31,"input",18),n(32,"label",19),o(33,"Preguntados"),t(),s(34,"br"),t(),n(35,"div",15),s(36,"input",20),n(37,"label",21),o(38,"Cartas"),t()(),n(39,"div",15),s(40,"input",22),n(41,"label",23),o(42,"Punteria"),t()(),m(43,re,2,0,"div",7),t(),n(44,"div")(45,"label",14),o(46,"Como conociste la pagina?"),t(),n(47,"select",24)(48,"option",25),o(49,"Me la recomendaron"),t(),n(50,"option",26),o(51,"Vi un anuncio"),t(),n(52,"option",27),o(53,"Otro"),t()(),m(54,le,2,0,"div",7),t(),n(55,"div")(56,"label",14),o(57,"Danos tu opinion general de la pagina"),t(),s(58,"textarea",28),m(59,de,2,0,"div",7),t(),m(60,se,2,0,"button",29),t(),s(61,"app-navbar")(62,"app-chat"),t()}if(i&2){let e=v();r("formGroup",e.encuestaForm),d(6),r("ngClass",g(13,_,e.isFieldInvalid("nombre"))),d(),r("ngIf",e.isFieldInvalid("nombre")),d(3),r("ngClass",g(15,_,e.isFieldInvalid("apellido"))),d(),r("ngIf",e.isFieldInvalid("apellido")),d(4),r("ngClass",g(17,_,e.isFieldInvalid("edad"))),d(),r("ngIf",e.isFieldInvalid("edad")),d(4),r("ngClass",g(19,_,e.isFieldInvalid("telefono"))),d(),r("ngIf",e.isFieldInvalid("telefono")),d(22),r("ngIf",e.isFieldInvalid("juego_fav")),d(11),r("ngIf",e.isFieldInvalid("como_conociste")),d(5),r("ngIf",e.isFieldInvalid("opinion")),d(),r("ngIf",!e.encuestaEnviada)}}function me(i,l){if(i&1){let e=C();n(0,"div",31)(1,"div",32)(2,"h1"),o(3,"Gracias por darnos tu opinion! \u{1F917}"),t(),n(4,"div",33)(5,"button",34),E("click",function(){b(e);let c=v();return x(c.goTo("home"))}),o(6,"Ir a home"),t()()()()}}var Ie=(()=>{class i{constructor(e,a,c,h){this.router=e,this.fb=a,this.firestore=c,this.authService=h,this.encuestas=[],this.encuestaEnviada=!1,this.currentUser=this.authService.getCurrentUser()}ngOnInit(){this.encuestaForm=this.fb.group({edad:["",[u.required,p.edadValidator]],nombre:["",[u.required,p.soloLetras]],apellido:["",[u.required,p.soloLetras]],telefono:["",[u.required,p.telefonoValidator]],juego_fav:["",u.required],como_conociste:["",u.required],opinion:["",u.required]})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}get edad(){return this.encuestaForm.get("edad").value}get nombre(){return this.encuestaForm.get("nombre").value}get apellido(){return this.encuestaForm.get("apellido").value}get telefono(){return this.encuestaForm.get("telefono").value}get juego_fav(){return this.encuestaForm.get("juego_fav").value}get como_conociste(){return this.encuestaForm.get("como_conociste").value}get opinion(){return this.encuestaForm.get("opinion").value}isFieldInvalid(e){let a=this.encuestaForm.get(e);return a?a.invalid&&(a.dirty||a.touched):!1}onSubmit(){if(this.encuestaForm.valid){let e=Z(this.firestore,"encuesta"),a=K(e,Y("usuario","==",this.currentUser)),c=J(a,{idField:"id"});this.sub=c.subscribe(h=>{if(this.encuestas=h,this.encuestas.length===0)W(e,{usuario:this.currentUser,nombre:this.nombre,apellido:this.apellido,edad:this.edad,telefono:this.telefono,juego_fav:this.juego_fav,como_conociste:this.como_conociste,opinion:this.opinion}).then(()=>{this.encuestaEnviada=!0});else{let te=H(this.firestore,`encuesta/${this.encuestas[0].id}`);X(te,{nombre:this.nombre,apellido:this.apellido,edad:this.edad,telefono:this.telefono,juego_fav:this.juego_fav,como_conociste:this.como_conociste,opinion:this.opinion}).then(()=>{this.encuestaEnviada=!0})}})}else this.encuestaForm.markAllAsTouched();console.log(this.encuestaEnviada)}goTo(e=""){e==="home"&&this.router.navigate(["/home"])}static{this.\u0275fac=function(a){return new(a||i)(f(N),f(R),f($),f(B))}}static{this.\u0275cmp=S({type:i,selectors:[["app-encuesta"]],standalone:!0,features:[y],decls:3,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["class","row","id","encuestaEnviada",4,"ngIf"],["novalidate","",3,"ngSubmit","formGroup"],["id","fondo-form"],["id","titulo"],["for","nombre",1,"label"],["type","text","id","nombre","formControlName","nombre","required","",1,"field",3,"ngClass"],[4,"ngIf"],["for","apellido",1,"label"],["type","text","id","apellido","formControlName","apellido","required","",1,"field",3,"ngClass"],["for","edad",1,"label"],["type","number","id","edad","formControlName","edad","required","",1,"field",3,"ngClass"],["for","telefono",1,"label"],["type","number","id","telefono","formControlName","telefono","required","",1,"field",3,"ngClass"],[1,"label"],[1,"option"],["formControlName","juego_fav","type","radio","id","ahorcado","name","juego_fav","value","ahorcado"],["for","ahorcado"],["formControlName","juego_fav","type","radio","id","preguntados","name","juego_fav","value","preguntados"],["for","preguntados"],["formControlName","juego_fav","type","radio","id","cartas","name","juego_fav","value","cartas"],["for","cartas"],["formControlName","juego_fav","type","radio","id","punteria","name","juego_fav","value","punteria"],["for","punteria"],["name","como_conociste","formControlName","como_conociste"],["value","recomendacion"],["value","anuncio"],["value","otro"],["formControlName","opinion","id","comentario",1,"field"],["type","submit",4,"ngIf"],["type","submit"],["id","encuestaEnviada",1,"row"],[1,"col","text-center"],[1,"container"],["type","submit","id","btn_home",3,"click"]],template:function(a,c){a&1&&(n(0,"body"),m(1,ce,63,21,"form",0)(2,me,7,0,"div",1),t()),a&2&&(d(),r("ngIf",!c.encuestaEnviada),d(),r("ngIf",c.encuestaEnviada))},dependencies:[M,F,I,U,P,A,z,w,k,q,T,j,O,G,L,V,D,Q,ee],styles:['body[_ngcontent-%COMP%]{background-image:url("./media/login-desktop2-RMQDQUJU.jpg");width:100%;height:100vh;background-size:cover;background-repeat:no-repeat;font-family:Courier New,Courier,monospace}#titulo[_ngcontent-%COMP%]{color:#fff;font-weight:700}#fondo-form[_ngcontent-%COMP%]{background-color:#f680d0ed;position:absolute;top:50%;left:50%;transform:translate(-49%,-49%);padding:50px;flex-direction:column}.label[_ngcontent-%COMP%]{font-size:25px;color:#fff;display:block}#comentario[_ngcontent-%COMP%]{width:30rem;height:7rem;resize:none;padding:10px;text-align:left;vertical-align:top;overflow:auto;display:block;line-height:normal}.field[_ngcontent-%COMP%]{color:#000}.option[_ngcontent-%COMP%]{color:#fff;display:block;font-size:1.2rem}button[_ngcontent-%COMP%]{color:#fff;border:none;font-weight:700;margin-top:30px;background-color:#f63ebc;font-size:22px;padding:16px 160px;text-shadow:0px 1px 0px pink;border-radius:10px;width:100%}button[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}#encuestaEnviada[_ngcontent-%COMP%]{background-color:#ee1fbe80;color:#fff;width:300px;height:300px;text-align:center;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}#btn_home[_ngcontent-%COMP%]{background:none;color:#fff;border:none;padding:.2rem;font-weight:700}#btn_home[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}@media (max-width: 768px){body[_ngcontent-%COMP%]{background-image:url("./media/login-mobile-WIPBTCBA.jpg");background-size:cover;background-position:center}#fondo-form[_ngcontent-%COMP%]{padding:20px;width:90%;top:50%;left:50%;transform:translate(-50%,-50%)}.label[_ngcontent-%COMP%]{font-size:20px}.field[_ngcontent-%COMP%]{width:100%;font-size:16px}#comentario[_ngcontent-%COMP%]{width:100%;height:5rem}button[_ngcontent-%COMP%]{font-size:18px;padding:12px 100px;width:100%}#btn_home[_ngcontent-%COMP%]{font-size:16px}#encuestaEnviada[_ngcontent-%COMP%]{width:250px;height:250px}}']})}}return i})();export{Ie as EncuestaComponent};
